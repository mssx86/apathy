From a9b036d2c68dcbab40a6e4949b005dd694ed65e4 Mon Sep 17 00:00:00 2001
From: Thomas Deutschmann <whissi@gentoo.org>
Date: Mon, 1 Feb 2021 15:27:21 +0100
Subject: [PATCH 32/32] bmo#1684365: Add a null pointer check so that Firefox
 won't crash when it can't initialize mRemoteServer

Bug: https://bugs.gentoo.org/762035
Signed-off-by: Thomas Deutschmann <whissi@gentoo.org>
---
 toolkit/components/remote/nsRemoteService.cpp | 4 ++++
 1 file changed, 4 insertions(+)

diff --git a/toolkit/components/remote/nsRemoteService.cpp b/toolkit/components/remote/nsRemoteService.cpp
index 4a876c32b2..7da905a411 100644
--- a/toolkit/components/remote/nsRemoteService.cpp
+++ b/toolkit/components/remote/nsRemoteService.cpp
@@ -170,6 +170,10 @@ void nsRemoteService::StartupServer() {
   return;
 #endif
 
+  if (!mRemoteServer) {
+    return;
+  }
+
   nsresult rv = mRemoteServer->Startup(mProgram.get(), mProfile.get());
 
   if (NS_FAILED(rv)) {
-- 
2.30.1

